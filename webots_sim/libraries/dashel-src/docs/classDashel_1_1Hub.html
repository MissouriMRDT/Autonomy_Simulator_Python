<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>dashel: Dashel::Hub Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">dashel
   &#160;<span id="projectnumber">1.3.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceDashel.html">Dashel</a></li><li class="navelem"><a class="el" href="classDashel_1_1Hub.html">Hub</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classDashel_1_1Hub-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Dashel::Hub Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The central place where to create, destroy, and synchronize streams.  
 <a href="classDashel_1_1Hub.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dashel_8h_source.html">dashel.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7dde3e7d3b6ba50cbba1e9d35b936888"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7dde3e7d3b6ba50cbba1e9d35b936888"></a>
typedef std::set&lt; <a class="el" href="classDashel_1_1Stream.html">Stream</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a7dde3e7d3b6ba50cbba1e9d35b936888">StreamsSet</a></td></tr>
<tr class="memdesc:a7dde3e7d3b6ba50cbba1e9d35b936888"><td class="mdescLeft">&#160;</td><td class="mdescRight">A list of streams. <br /></td></tr>
<tr class="separator:a7dde3e7d3b6ba50cbba1e9d35b936888"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac71b3cfad9aa9fb8b28d397beef5c486"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#ac71b3cfad9aa9fb8b28d397beef5c486">Hub</a> (const bool <a class="el" href="classDashel_1_1Hub.html#a153bb607cb687876a7ff9438cf7ab211">resolveIncomingNames</a>=true)</td></tr>
<tr class="memdesc:ac71b3cfad9aa9fb8b28d397beef5c486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ac71b3cfad9aa9fb8b28d397beef5c486">More...</a><br /></td></tr>
<tr class="separator:ac71b3cfad9aa9fb8b28d397beef5c486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2737aef68ab68bae86d300641fdd154"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2737aef68ab68bae86d300641fdd154"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#ad2737aef68ab68bae86d300641fdd154">~Hub</a> ()</td></tr>
<tr class="memdesc:ad2737aef68ab68bae86d300641fdd154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, closes all connections. <br /></td></tr>
<tr class="separator:ad2737aef68ab68bae86d300641fdd154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50355e9d3f4bfe791057410330c9897b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDashel_1_1Stream.html">Stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a50355e9d3f4bfe791057410330c9897b">connect</a> (const std::string &amp;target)</td></tr>
<tr class="memdesc:a50355e9d3f4bfe791057410330c9897b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listens for incoming connections on a target.  <a href="#a50355e9d3f4bfe791057410330c9897b">More...</a><br /></td></tr>
<tr class="separator:a50355e9d3f4bfe791057410330c9897b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d68fe5ca6655e7b2d6e064dbd55c104"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a1d68fe5ca6655e7b2d6e064dbd55c104">closeStream</a> (<a class="el" href="classDashel_1_1Stream.html">Stream</a> *stream)</td></tr>
<tr class="memdesc:a1d68fe5ca6655e7b2d6e064dbd55c104"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a stream, remove it from the <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a>, and delete it.  <a href="#a1d68fe5ca6655e7b2d6e064dbd55c104">More...</a><br /></td></tr>
<tr class="separator:a1d68fe5ca6655e7b2d6e064dbd55c104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d345b7de535ca73b009ad875e026832"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d345b7de535ca73b009ad875e026832"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a8d345b7de535ca73b009ad875e026832">run</a> ()</td></tr>
<tr class="memdesc:a8d345b7de535ca73b009ad875e026832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs and returns only when an external event requests the application to stop. <br /></td></tr>
<tr class="separator:a8d345b7de535ca73b009ad875e026832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b18e94eb144357a5a7738617a00ccb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a46b18e94eb144357a5a7738617a00ccb">step</a> (const int timeout=0)</td></tr>
<tr class="memdesc:a46b18e94eb144357a5a7738617a00ccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for data from the transfers streams or connections from the listening streams.  <a href="#a46b18e94eb144357a5a7738617a00ccb">More...</a><br /></td></tr>
<tr class="separator:a46b18e94eb144357a5a7738617a00ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c4b5b4529e90b16ef689056cf15a62"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5c4b5b4529e90b16ef689056cf15a62"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#af5c4b5b4529e90b16ef689056cf15a62">stop</a> ()</td></tr>
<tr class="memdesc:af5c4b5b4529e90b16ef689056cf15a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops running, subclasses or external code may call this function, that is the only thread-safe function of the <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a>. <br /></td></tr>
<tr class="separator:af5c4b5b4529e90b16ef689056cf15a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc912e9dcb643388353335c7177751fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc912e9dcb643388353335c7177751fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#adc912e9dcb643388353335c7177751fb">lock</a> ()</td></tr>
<tr class="memdesc:adc912e9dcb643388353335c7177751fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block any hub processing so another thread can access the streams safely. <br /></td></tr>
<tr class="separator:adc912e9dcb643388353335c7177751fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac681085fb05df3a2af6ec031ffd36c9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac681085fb05df3a2af6ec031ffd36c9b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#ac681085fb05df3a2af6ec031ffd36c9b">unlock</a> ()</td></tr>
<tr class="memdesc:ac681085fb05df3a2af6ec031ffd36c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the lock aquired by <a class="el" href="classDashel_1_1Hub.html#adc912e9dcb643388353335c7177751fb" title="Block any hub processing so another thread can access the streams safely. ">lock()</a>. <br /></td></tr>
<tr class="separator:ac681085fb05df3a2af6ec031ffd36c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a153bb607cb687876a7ff9438cf7ab211"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a153bb607cb687876a7ff9438cf7ab211"></a>
const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a153bb607cb687876a7ff9438cf7ab211">resolveIncomingNames</a></td></tr>
<tr class="memdesc:a153bb607cb687876a7ff9438cf7ab211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether <a class="el" href="namespaceDashel.html" title="Dashel, a cross-platform stream abstraction library. ">Dashel</a> should try to resolve the peer's hostname of incoming TCP connections. <br /></td></tr>
<tr class="separator:a153bb607cb687876a7ff9438cf7ab211"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2b54b828dcdb14b6925b4df8a4917a25"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a2b54b828dcdb14b6925b4df8a4917a25">connectionCreated</a> (<a class="el" href="classDashel_1_1Stream.html">Stream</a> *stream)</td></tr>
<tr class="memdesc:a2b54b828dcdb14b6925b4df8a4917a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when any data connection is created.  <a href="#a2b54b828dcdb14b6925b4df8a4917a25">More...</a><br /></td></tr>
<tr class="separator:a2b54b828dcdb14b6925b4df8a4917a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936441dae6346ce66f0bca93c2fa9dc1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a936441dae6346ce66f0bca93c2fa9dc1">incomingData</a> (<a class="el" href="classDashel_1_1Stream.html">Stream</a> *stream)</td></tr>
<tr class="memdesc:a936441dae6346ce66f0bca93c2fa9dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when data is available for reading on the stream.  <a href="#a936441dae6346ce66f0bca93c2fa9dc1">More...</a><br /></td></tr>
<tr class="separator:a936441dae6346ce66f0bca93c2fa9dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29ed0eb483a9b6af649749a0545bc6eb"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a29ed0eb483a9b6af649749a0545bc6eb">connectionClosed</a> (<a class="el" href="classDashel_1_1Stream.html">Stream</a> *stream, bool abnormal)</td></tr>
<tr class="memdesc:a29ed0eb483a9b6af649749a0545bc6eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when target closes connection.  <a href="#a29ed0eb483a9b6af649749a0545bc6eb">More...</a><br /></td></tr>
<tr class="separator:a29ed0eb483a9b6af649749a0545bc6eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a14c5cd15d72e3f7a45e33328bafbc76b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14c5cd15d72e3f7a45e33328bafbc76b"></a>
<a class="el" href="classDashel_1_1Hub.html#a7dde3e7d3b6ba50cbba1e9d35b936888">StreamsSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDashel_1_1Hub.html#a14c5cd15d72e3f7a45e33328bafbc76b">dataStreams</a></td></tr>
<tr class="memdesc:a14c5cd15d72e3f7a45e33328bafbc76b"><td class="mdescLeft">&#160;</td><td class="mdescRight">All our streams that transfer data (in opposition to streams that just listen for data). <br /></td></tr>
<tr class="separator:a14c5cd15d72e3f7a45e33328bafbc76b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The central place where to create, destroy, and synchronize streams. </p>
<p>To create a client connection, users of the library have to subclass <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a> and implement <a class="el" href="classDashel_1_1Hub.html#a2b54b828dcdb14b6925b4df8a4917a25" title="Called when any data connection is created. ">connectionCreated()</a>, <a class="el" href="classDashel_1_1Hub.html#a936441dae6346ce66f0bca93c2fa9dc1" title="Called when data is available for reading on the stream. ">incomingData()</a>, and <a class="el" href="classDashel_1_1Hub.html#a29ed0eb483a9b6af649749a0545bc6eb" title="Called when target closes connection. ">connectionClosed()</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac71b3cfad9aa9fb8b28d397beef5c486"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Dashel::Hub::Hub </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>resolveIncomingNames</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolveIncomingNames</td><td>if true, try to resolve the peer's hostname of incoming TCP connections </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1d68fe5ca6655e7b2d6e064dbd55c104"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dashel::Hub::closeStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDashel_1_1Stream.html">Stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a stream, remove it from the <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a>, and delete it. </p>
<p>If the stream is not present in the <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a>, it is deleted nevertheless. Note that <a class="el" href="classDashel_1_1Hub.html#a29ed0eb483a9b6af649749a0545bc6eb" title="Called when target closes connection. ">connectionClosed()</a> is not called by <a class="el" href="classDashel_1_1Hub.html#a1d68fe5ca6655e7b2d6e064dbd55c104" title="Close a stream, remove it from the Hub, and delete it. ">closeStream()</a> and that you must not call <a class="el" href="classDashel_1_1Hub.html#a1d68fe5ca6655e7b2d6e064dbd55c104" title="Close a stream, remove it from the Hub, and delete it. ">closeStream()</a> from inside <a class="el" href="classDashel_1_1Hub.html#a2b54b828dcdb14b6925b4df8a4917a25" title="Called when any data connection is created. ">connectionCreated()</a>, <a class="el" href="classDashel_1_1Hub.html#a29ed0eb483a9b6af649749a0545bc6eb" title="Called when target closes connection. ">connectionClosed()</a> or <a class="el" href="classDashel_1_1Hub.html#a936441dae6346ce66f0bca93c2fa9dc1" title="Called when data is available for reading on the stream. ">incomingData()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>stream to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a50355e9d3f4bfe791057410330c9897b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDashel_1_1Stream.html">Stream</a>* Dashel::Hub::connect </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listens for incoming connections on a target. </p>
<p>Some targets, such as a serial ports and files may directly generate a new connection; others, such as network interfaces, will only generate news connections when a peer connects. May throw a ConnectionError exception if the target does not exists or is not ready.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>destination to listen connections from (see Section <a class="el" href="index.html#TargetNamingSec">Targets naming</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stream we are connected to; if connect was not possible, an exception was throw. </dd></dl>

</div>
</div>
<a class="anchor" id="a29ed0eb483a9b6af649749a0545bc6eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Dashel::Hub::connectionClosed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDashel_1_1Stream.html">Stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>abnormal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when target closes connection. </p>
<p>The only valid method to call on the stream is getTargetName(), input/output operations are forbidden. You must not call closeStream(stream) from within this method for the same stream as the one passed as parameter. Subclass can implement this method. Called with the stream lock held.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>stream to the target. </td></tr>
    <tr><td class="paramname">abnormal</td><td>whether the connection was closed during step (abnormal == false) or when an operation was performed (abnormal == true) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2b54b828dcdb14b6925b4df8a4917a25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Dashel::Hub::connectionCreated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDashel_1_1Stream.html">Stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when any data connection is created. </p>
<p>It is not called when a listening connection (eg tcpin:) is created. If the stream is closed during this method, an exception occurs: the caller is responsible to handle it. The stream is already inserted in the stream list when this function is called. Subclass can implement this method. Called with the stream lock held.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>stream to the target </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a936441dae6346ce66f0bca93c2fa9dc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Dashel::Hub::incomingData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDashel_1_1Stream.html">Stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when data is available for reading on the stream. </p>
<p>If the stream is closed during this method, an exception occurs: <a class="el" href="classDashel_1_1Hub.html" title="The central place where to create, destroy, and synchronize streams. ">Hub</a> stops the execution of this method and calls <a class="el" href="classDashel_1_1Hub.html#a29ed0eb483a9b6af649749a0545bc6eb" title="Called when target closes connection. ">connectionClosed()</a>; objects dynamically allocated must thus be handled with auto_ptr. If <a class="el" href="classDashel_1_1Hub.html#a46b18e94eb144357a5a7738617a00ccb" title="Waits for data from the transfers streams or connections from the listening streams. ">step()</a> is used, subclass must implement this method and call read at least once. Called with the stream lock held.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>stream to the target </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a46b18e94eb144357a5a7738617a00ccb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Dashel::Hub::step </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for data from the transfers streams or connections from the listening streams. </p>
<p>Read all available data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>if -1, waits until data arrive. If 0, do not wait, just poll for activity. If positive, waits at maximum timeout ms. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if <a class="el" href="classDashel_1_1Hub.html#af5c4b5b4529e90b16ef689056cf15a62" title="Stops running, subclasses or external code may call this function, that is the only thread-safe funct...">stop()</a> was called or the application was requested to terminate, true otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>dashel/<a class="el" href="dashel_8h_source.html">dashel.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
